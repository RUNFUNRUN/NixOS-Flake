"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[449],{57026:(e,t,r)=>{r.d(t,{Z:()=>u});var n,o,a=r(35776);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}const u=function(e){return a.createElement("svg",c({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),n||(n=a.createElement("defs",null,a.createElement("clipPath",{id:"outlined_svg__a"},a.createElement("path",{fill:"currentcolor",d:"M11.541.514a4 4 0 011.4 1.317l.126.209 5.58 9.92a4 4 0 01-3.23 5.953l-.256.008H4a4 4 0 01-3.605-5.733l.119-.228 5.58-9.92A4 4 0 0111.541.514zM7.92 2.887l-.082.133-5.58 9.92a2 2 0 001.594 2.976L4 15.92h11.16a2 2 0 001.815-2.841l-.071-.14-5.58-9.92a2 2 0 00-3.405-.133zM9.58 11.92a1 1 0 110 2 1 1 0 010-2zm0-7a1 1 0 011 1v4a1 1 0 11-2 0v-4a1 1 0 011-1z"})))),o||(o=a.createElement("g",{clipPath:"url(#outlined_svg__a)",fill:"currentcolor",transform:"translate(2.42 3.079)"},a.createElement("path",{d:"M0 0h19.161v17.921H0V0z"}))))}},80506:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(35776),o=r(86548),a=r(57026);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}const u=e=>n.default.createElement(o.Z,c({},e,{IconPrimary:a.Z,IconSecondary:a.Z}))},90209:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_});var n=r(86484),o=r.n(n),a=r(35776),c=r(88767),u=r(45909),l=r(50562),s=r(26990),i=r(77803),f=r(58953),m=r(69282),p=r(38632),d=r(33793),y=r(47393),b=r(45544),h=r(38577),v=r(11491),g=r(41718),O=r(46899),w=r(34445);const P=["onRequestClose","onComment","onInputChange","parentSelector","parentComment","post"];function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}function S(e,t,r,n,o,a,c){try{var u=e[a](c),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function j(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){S(a,n,o,c,u,"next",e)}function u(e){S(a,n,o,c,u,"throw",e)}c(void 0)}))}}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,u=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Z;!function(e){e.Write="Write",e.Preview="Preview"}(Z||(Z={}));const A={title:"Discard comment",description:"Are you sure you want to close and discard your comment?",okButton:{className:"btn-primary-ketchup",title:"Discard"},cancelButton:{title:"Stay"}};function _(e){let t=e.onRequestClose,r=e.onComment,n=e.onInputChange,S=e.parentSelector,I=e.parentComment,_=e.post,M=N(e,P);const q=I.handle,z=I.commentId,B=I.editId,D=I.editContent,K=I.replyTo,T=I.authorId,H=C((0,a.useState)(D||K),2),R=H[0],F=H[1],J=C((0,a.useState)(!1),2),U=J[0],W=J[1],$=C((0,a.useState)(null),2),G=$[0],L=$[1],Q=(0,m.G)().showPrompt,V=(0,i.Y)().requestMethod,Y=(0,c.useQuery)((0,p.e0)(p.dt.PostComments,null,{authorId:T,sourceId:_.source.id}),(()=>(0,d.e9)(_.source.id,T)),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:!!T&&_.source.type===y.PO.Squad,retry:!1},h.t3)),X=Y.data,ee=Y.isFetched,te=(0,O.o)().completeAction,re=function(){var e=j(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!D&&null!=R&&R.length||D&&D!==R,!e.t0){e.next=5;break}return e.next=4,Q(A);case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:t(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=["post_comments_mutations",_.id],oe=(0,c.useMutation)((e=>V(l.B3,z?u.y5:u.hK,e,{requestKey:JSON.stringify(ne)})),{onSuccess:e=>{e&&(r(e.comment,!0),_.source.type===y.PO.Squad&&te(w.Us.SquadFirstComment))}}).mutateAsync,ae=(0,c.useMutation)((e=>V(l.B3,u.hp,e,{requestKey:JSON.stringify(ne)})),{onSuccess:e=>e&&r(e.comment,!1)}).mutateAsync,ce=function(){var e=j(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U&&null!=R&&R.trim().length){e.next=2;break}return e.abrupt("return");case 2:if(L(null),W(!0),e.prev=4,!B){e.next=10;break}return e.next=8,ae({id:B,content:R});case 8:e.next=12;break;case 10:return e.next=12,oe({id:z||_.id,content:R});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),L("Something went wrong, try again"),W(!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((()=>{null==n||n(R)}),[R]);const ue=!(null!=R&&R.trim().length),le=a.default.createElement(s.z,{disabled:ue,loading:U,onClick:ce,className:"ml-auto btn-primary-avocado"},B?"Update":"Post");return a.default.createElement(f.u_,x({contentRef:e=>{e&&(e.scrollTop=e.scrollHeight-e.clientHeight)},onRequestClose:re,kind:f.u_.Kind.FlexibleTop,size:f.u_.Size.Medium,tabs:Object.values(Z),parentSelector:S},M),a.default.createElement(f.u_.Header.Tabs,{disabledTab:e=>e===Z.Preview&&ue}),a.default.createElement(g.Z,x({},M,{parentComment:I,onInput:F,input:R,errorMessage:G,sendComment:ce,sendingComment:U,submitAction:le,tabName:Z.Write}),!ee||X&&X.role!==y.Pt.Blocked?null:a.default.createElement(b.ZP,{type:b.NK.Info,title:`${q} is no longer part of the squad and will not be able to see or reply to your comment.`})),a.default.createElement(v.Z,{input:R,sourceId:_.source.id,parentSelector:S,tabName:Z.Preview},le))}},45544:(e,t,r)=>{r.d(t,{NK:()=>f,ZP:()=>b,oM:()=>y});var n=r(35776),o=r(94184),a=r.n(o),c=r(86456),u=r(80506),l=r(63031),s=r(32256),i=r(86548);let f;!function(e){e.Info="info",e.Error="error",e.Success="success"}(f||(f={}));const m={info:"text-theme-color-bun",error:"text-theme-status-error",success:"text-theme-status-success"},p={info:"border-l-theme-color-bun",error:"border-l-theme-status-error",success:"border-l-theme-status-success"},d={info:c.Z,error:u.Z,success:l.Z},y=(0,s.Z)("p","typo-callout mt-3");const b=function(e){let t=e.className,r=e.title,o=e.children,c=e.type,u=void 0===c?f.Info:c;const l=d[u];return n.default.createElement("div",{className:a()("flex flex-col p-3 border border-theme-active border-l-4",p[u],o?"rounded-16":"rounded-12",t)},n.default.createElement("span",{className:"flex flex-row items-center"},n.default.createElement(l,{size:i.J.Small,className:a()("mr-2",m[u])}),n.default.createElement("span",{className:a()("typo-callout flex flex-1",o&&"font-bold",o&&m[u])},r)),o)}}}]);